(function(){"use strict";var e={5259:function(e,o,t){var r=t(3751),n=t(641);const a={id:"app"};function s(e,o,t,r,s,l){const i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(i)])}var l={name:"App"},i=t(6262);const u=(0,i.A)(l,[["render",s]]);var d=u,c=(t(8992),t(7550),t(5220)),p=t(33);const h={key:0},m={key:1};function g(e,o,t,a,s,l){return(0,n.uX)(),(0,n.CE)("div",null,[o[12]||(o[12]=(0,n.Lk)("h1",null,"홈 화면",-1)),(0,n.Lk)("div",null,[(0,n.Lk)("button",{onClick:o[0]||(o[0]=e=>s.showSignupForm=!s.showSignupForm)},(0,p.v_)(s.showSignupForm?"로그인 화면 보기":"회원가입 화면 보기"),1)]),s.showSignupForm?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",h,[o[9]||(o[9]=(0,n.Lk)("h2",null,"로그인",-1)),(0,n.Lk)("form",{onSubmit:o[3]||(o[3]=(0,r.D$)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.email=e),placeholder:"이메일",required:""},null,512),[[r.Jo,s.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.password=e),type:"password",placeholder:"비밀번호",required:""},null,512),[[r.Jo,s.password]]),o[8]||(o[8]=(0,n.Lk)("button",{type:"submit"},"로그인",-1))],32)])),s.showSignupForm?((0,n.uX)(),(0,n.CE)("div",m,[o[11]||(o[11]=(0,n.Lk)("h2",null,"회원가입",-1)),(0,n.Lk)("form",{onSubmit:o[7]||(o[7]=(0,r.D$)(((...e)=>l.signup&&l.signup(...e)),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.username=e),placeholder:"사용자명",required:""},null,512),[[r.Jo,s.username]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.email=e),placeholder:"이메일",required:""},null,512),[[r.Jo,s.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>s.password=e),type:"password",placeholder:"비밀번호",required:""},null,512),[[r.Jo,s.password]]),o[10]||(o[10]=(0,n.Lk)("button",{type:"submit"},"회원가입",-1))],32)])):(0,n.Q3)("",!0)])}t(4114);var k=t(4335),f={name:"HomeView",data(){return{showSignupForm:!1,username:"",email:"",password:""}},methods:{async login(){try{const e=await k.A.post("http://localhost:3000/login",{email:this.email,password:this.password});localStorage.setItem("token",e.data.token),this.$router.push({name:"MainPage"}),alert("로그인 성공")}catch(e){console.error(e),alert("로그인 실패")}},async signup(){try{await k.A.post("http://localhost:3000/signup",{username:this.username,email:this.email,password:this.password}),alert("회원가입 성공"),this.showSignupForm=!1}catch(e){console.error(e),alert("회원가입 실패")}}}};const b=(0,i.A)(f,[["render",g],["__scopeId","data-v-6e858245"]]);var v=b;const w={key:0,style:{"margin-top":"20px",color:"gray"}},y={key:0,style:{"margin-top":"20px",color:"gray"}};function L(e,o,t,a,s,l){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",null,[o[4]||(o[4]=(0,n.Lk)("h1",null,"로그인",-1)),(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(0,r.D$)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.email=e),placeholder:"Email",required:""},null,512),[[r.Jo,s.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.password=e),type:"password",placeholder:"Password",required:""},null,512),[[r.Jo,s.password]]),o[3]||(o[3]=(0,n.Lk)("button",{type:"submit"},"로그인",-1))],32),s.debugInfo?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("pre",null,(0,p.v_)(s.debugInfo),1)])):(0,n.Q3)("",!0)]),s.debugInfo?((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("pre",null,(0,p.v_)(s.debugInfo),1)])):(0,n.Q3)("",!0)],64)}var C={name:"UserLogin",data(){return{email:"",password:"",debugInfo:null}},methods:{async login(){this.debugInfo={email:this.email,password:this.password,message:"로그인 요청 시작"},console.log("로그인 요청 시작",this.debugInfo),console.log(this.email,this.password),console.log("로그인 요청 시작");try{const e=await k.A.post("http://localhost:3000/login",{email:this.email,password:this.password});console.log("응답 데이터:",e.data),localStorage.setItem("token",e.data.token),console.log("토큰 저장 완료"),this.$router.push({name:"MainPage"}),console.log("리디렉션 요청 완료")}catch(e){console.error("로그인 실패:",e),alert("로그인 실패")}}},mounted(){console.log("Current route:",this.$route),console.log("Router instance:",this.$router)}};const E=(0,i.A)(C,[["render",L],["__scopeId","data-v-190ddbe3"]]);var _=E;function I(e,o,t,a,s,l){return(0,n.uX)(),(0,n.CE)("div",null,[o[6]||(o[6]=(0,n.Lk)("h1",null,"회원가입",-1)),(0,n.Lk)("form",{onSubmit:o[4]||(o[4]=(0,r.D$)(((...e)=>l.signup&&l.signup(...e)),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.username=e),placeholder:"Username",required:""},null,512),[[r.Jo,s.username]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.email=e),placeholder:"Email",required:""},null,512),[[r.Jo,s.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.password=e),type:"password",placeholder:"Password",required:""},null,512),[[r.Jo,s.password]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.recommenderId=e),placeholder:"추천인 ID (선택)"},null,512),[[r.Jo,s.recommenderId]]),o[5]||(o[5]=(0,n.Lk)("button",{type:"submit"},"회원가입",-1))],32)])}var S={name:"UserSignup",data(){return{username:"",email:"",password:"",recommenderId:""}},methods:{async signup(){try{const e={username:this.username,email:this.email,password:this.password};this.recommenderId&&(e.recommender_id=this.recommenderId),await k.A.post("http://localhost:3000/signup",e),alert("회원가입 성공")}catch(e){alert("회원가입 실패"),console.error("회원가입 오류:",e)}}}};const O=(0,i.A)(S,[["render",I]]);var A=O;const T={class:"main"},q={class:"points"},U={class:"tabs"},X={key:0},P={key:1},$={key:2},V={key:3};function D(e,o,t,r,a,s){const l=(0,n.g2)("OrgChart");return(0,n.uX)(),(0,n.CE)("div",T,[o[9]||(o[9]=(0,n.Lk)("h1",null,"메인 화면",-1)),(0,n.Lk)("div",q,[(0,n.Lk)("p",null,"내 포인트: "+(0,p.v_)(a.points)+" 포인트",1)]),(0,n.Lk)("div",U,[(0,n.Lk)("button",{onClick:o[0]||(o[0]=e=>s.selectTab("members"))},"회원 관리"),(0,n.Lk)("button",{onClick:o[1]||(o[1]=e=>s.selectTab("orders"))},"주문 관리"),(0,n.Lk)("button",{onClick:o[2]||(o[2]=e=>s.selectTab("points"))},"포인트 관리"),(0,n.Lk)("button",{onClick:o[3]||(o[3]=e=>s.selectTab("others"))},"기타 관리")]),"members"===a.selectedTab?((0,n.uX)(),(0,n.CE)("div",X,[(0,n.Lk)("ul",null,[o[5]||(o[5]=(0,n.Lk)("li",null,"회원정보 수정",-1)),(0,n.Lk)("li",{onClick:o[4]||(o[4]=e=>a.showOrgChart=!0)},"추천인 조직도")]),a.showOrgChart?((0,n.uX)(),(0,n.Wv)(l,{key:0})):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),"orders"===a.selectedTab?((0,n.uX)(),(0,n.CE)("div",P,o[6]||(o[6]=[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,"주문하기"),(0,n.Lk)("li",null,"주문내역")],-1)]))):(0,n.Q3)("",!0),"points"===a.selectedTab?((0,n.uX)(),(0,n.CE)("div",$,o[7]||(o[7]=[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,"포인트 내역")],-1)]))):(0,n.Q3)("",!0),"others"===a.selectedTab?((0,n.uX)(),(0,n.CE)("div",V,o[8]||(o[8]=[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,"공지사항")],-1)]))):(0,n.Q3)("",!0)])}function J(e,o,t,r,a,s){return(0,n.uX)(),(0,n.CE)("div",null,o[0]||(o[0]=[(0,n.Lk)("h2",null,"추천인 조직도",-1),(0,n.Lk)("div",{id:"chart_div"},null,-1)]))}t(3949);var F={name:"OrgChart",data(){return{hierarchyData:[]}},async mounted(){try{const e=await k.A.get("http://localhost:3000/api/users/hierarchy",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("API 응답 데이터:",e.data),this.hierarchyData=e.data,this.drawChart()}catch(e){console.error("조직도 데이터를 가져오는 중 오류 발생:",e),e.response?(console.error("Response error:",e.response.data),console.error("Response status:",e.response.status),console.error("Response headers:",e.response.headers)):e.request?console.error("Request error:",e.request):console.error("Error message:",e.message)}},methods:{drawChart(){google.charts.load("current",{packages:["orgchart"]}),google.charts.setOnLoadCallback((()=>{const e=new google.visualization.DataTable;e.addColumn("string","Name"),e.addColumn("string","Manager"),e.addColumn("string","ToolTip"),console.log("Hierarchy Data:",this.hierarchyData),this.hierarchyData.forEach((o=>{const t=o.user_name||"이름 없음",r="없음"===o.recommender_name?null:o.recommender_name||"추천인 없음",n=o.user_level||"레벨 없음",a=o.join_date||"가입일 없음";console.log("Adding row:",t,r,`${n} (${a})`),e.addRow([t,r,`${n} (${a})`])}));const o=new google.visualization.OrgChart(document.getElementById("chart_div"));o.draw(e,{allowHtml:!0})}))}}};const j=(0,i.A)(F,[["render",J],["__scopeId","data-v-5400db47"]]);var Q=j,x={name:"MainPage",components:{OrgChart:Q},data(){return{points:0,selectedTab:"members",showOrgChart:!1}},created(){this.fetchUserPoints()},methods:{selectTab(e){this.selectedTab=e,this.showOrgChart=!1},async fetchUserPoints(){try{const e=await k.A.get("http://localhost:3000/user/points",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.points=e.data.points}catch(e){console.error("포인트를 가져오는 데 실패했습니다",e)}}}};const R=(0,i.A)(x,[["render",D],["__scopeId","data-v-4f9df83c"]]);var M=R;const H=[{path:"/",name:"Home",component:v},{path:"/login",name:"Login",component:_},{path:"/signup",name:"Signup",component:A},{path:"/main",name:"MainPage",component:M,meta:{requiresAuth:!0}}],z=(0,c.aE)({history:(0,c.LA)(),routes:H});z.beforeEach(((e,o,t)=>{console.log("Navigation triggered:",{from:o.path,to:e.path});const r=localStorage.getItem("token");console.log("Current token:",r?"exists":"not found"),e.matched.some((e=>e.meta.requiresAuth))?(console.log("Route requires auth"),r?(console.log("Token found, proceeding to route"),t()):(console.log("No token found, redirecting to login"),t({path:"/login",query:{redirect:e.fullPath}}))):(console.log("Route does not require auth"),t())})),z.afterEach(((e,o)=>{console.log("Navigation completed:",{from:o.path,to:e.path})}));var N=z;const B=(0,r.Ef)(d);B.config.errorHandler=(e,o,t)=>{console.error("Vue Error:",e),console.log("Component:",o),console.log("Error Info:",t)},B.use(N),B.mount("#app")}},o={};function t(r){var n=o[r];if(void 0!==n)return n.exports;var a=o[r]={exports:{}};return e[r].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(o,r,n,a){if(!r){var s=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],a=e[d][2];for(var l=!0,i=0;i<r.length;i++)(!1&a||s>=a)&&Object.keys(t.O).every((function(e){return t.O[e](r[i])}))?r.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(d--,1);var u=n();void 0!==u&&(o=u)}}return o}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,n,a]}}(),function(){t.d=function(e,o){for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,r){var n,a,s=r[0],l=r[1],i=r[2],u=0;if(s.some((function(o){return 0!==e[o]}))){for(n in l)t.o(l,n)&&(t.m[n]=l[n]);if(i)var d=i(t)}for(o&&o(r);u<s.length;u++)a=s[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},r=self["webpackChunkmy_new_front"]=self["webpackChunkmy_new_front"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=t.O(void 0,[504],(function(){return t(5259)}));r=t.O(r)})();
//# sourceMappingURL=app.d0a74a12.js.map